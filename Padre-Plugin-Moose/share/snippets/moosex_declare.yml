
---
# Copyright 2008-2012 The Padre development team as listed in Padre.pm.
# LICENSE
# This program is free software; you can redistribute it and/or
# modify it under the same terms as Perl 5 itself.

# MooseX::Declare snippets bundle for Padre::Plugin::Moose
# By Ahmad M. Zawawi (azawawi)

# after method modifier
after: after '$0' => sub { $1 }; 

# before method modifier
before: before '$0' => sub { $1 }; 

# around method modifier
around: around '$0' => sub { $1 }; 

# Augment method modifier
augment: augment '$0' => sub { $1 }; 

# Override method modifier
override: override '$0' => sub { $2 }; 

# Define class type
classtype: class_type '$0';

# Type coercion
coerce: |
  coerce '$0' 
      => from '$1' 
         via { $2 };

# Desctrutor
DEMOLISH: |
  method DEMOLISH {
      $0
  }

# Constructor
BUILD: |
  method BUILD {
      $0
  }

# Property
has: has '$0' => ( isa => 'Str', is  => 'ro', );

# Type
type: |
  type '$0' 
      => where { $1 };

# Subtype
subtype: subtype '$0' => as '$1' => where { $2 }};

# Exclude
excludes: excludes '$1';

# has lazy property builder
hasl: |
  has $0 => (
      isa => '$1',
      is  => '$2',
      lazy_build => 1,
  );
  
  method _build_$0 {
     $3
  }

# Role definition
role: |
  use MooseX::Declare;

  role $0 with ($1) {
  $2
  };

  1;

# Require a method definition
requires: requires '$0';

# Class declaration
class: |
  use MooseX::Declare;

  class $0 extends ($1) with ($2) {
    $3
  }

  1;

# Method declaration
meth: |
  method $0($1) {
      $2
  }
